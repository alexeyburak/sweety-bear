<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Sweety Bear</title>
    <th:block th:replace="/base/base_dependencies :: base_dependencies"/>
</head>
<body>
<header th:insert="blocks/header :: header"></header>
<div class="mt-3 ml-5" style="font-size:18px">
    Your orders
</div>
<div class="row row-cols-1 row-cols-md-3 g-4 ml-4 mr-4 mb-4">
    <div class="col" th:each="order : ${orders}">
        <div class="card h-10 mt-4">
            <form th:method="post" th:action="@{/orders/edit/{id}(id=${order.id})}">
                <div class="card-body">
                    <h5 class="card-title" th:utext="${order.sum}">Sum</h5>
                    <p class="card-text" th:utext="${order.address}">Address</p>
                    <div class="card-text" style="display: inline-block">Status:
                        <div th:utext="${order.status}" style="display: inline-block; font-weight:bold">Status</div>
                    </div>
                    <div class="card-text" style="display: inline-block">Order date:
                        <div th:utext="${order.dateOfCreated}" style="display: inline-block;">dateOfCreated</div>
                    </div>
                    <div class="card-text" style="display: inline-block">Delivery date:
                        <div th:utext="${order.dateOfDelivery}" style="display: inline-block; font-weight:bold">
                            dateOfDelivery
                        </div>
                    </div>
                    <div class="mt-1">
                        Products:
                    </div>
                    <div class="card-text mt-1" style="color: red"
                         th:if="${order.sum} > ${order.countCurrentlyProductsPrice()}">Products have been removed
                    </div>
                    <div th:each="details : ${order.details}">
                        <a th:href="@{/product/{id}(id=${details.product.id})}">
                            <div th:utext="${details.product.title}" style="font-style: italic">Title</div>
                        </a>
                        <div class="card-text" style="display: inline-block">Amount:
                            <div th:utext="${details.amount}" style="display: inline-block">Amount</div>
                        </div>
                        <div class="card-text" style="display: inline-block">Price:
                            <div th:utext="${details.price}" style="display: inline-block">Price</div>
                        </div>

                    </div>
                </div>
                <div class="btn-group ml-3" role="group" th:unless="${order.isOrderCanceled()}"
                     th:if="${order.isOrderApproved()}">
                    <input type="hidden" name="_csrf" value="${_csrf.token}">
                    <input type="hidden" th:value="CLOSED" name="status">
                    <button type="submit" class="btn btn-outline-secondary mb-3">Confirm delivery</button>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>